# cda — Медицинская карта ЦДА

Веб-интерфейс для визуализации и анализа данных цифрового двойника актива (ЦДА) в нефтяной промышленности.

## Возможности

### 1. Карта объектов ЦДА
- Интерактивная карта России по регионам
- При клике на регион отображается цепочка цифровых двойников
- Подсветка регионов с доступными активами

### 2. Статус объектов ЦДА
- Две интерактивные розы ветров:
  - **Красная роза**: Статус ЦД производственных этапов
  - **Зеленая роза**: Статус ЦД объектов
- Иконки объектов нефтяного промысла (пласт, труба, скважина, насос, резервуар, компрессор, сепаратор, факел)

### 3. NPV, Запасы, Темп отбора - 4D гиперкуб
- Интерактивный 3D куб, который можно вращать
- Ползунки для изменения параметров:
  - NPV (млн руб)
  - Запасы (млн т)
  - Темп отбора (%/год)
  - Бизнес-фактор
- Цвет куба меняется в зависимости от параметров (RGB: NPV-красный, Запасы-зеленый, Темп отбора-синий)
- Сценарии: текущая конъюнктура, бизнес просядет в 2 раза, бизнес вырастет в 2 раза

### 4. Cash Flow и график добычи
- График Cash Flow с возможностью настройки параметров
- График добычи
- Анализ выхода за рамки профиля
- Суммарные показатели и NPV

### 5. Жизненный цикл актива
- График накопленного прогресса по этапам
- Детализация каждого этапа:
  - Разведка
  - Разработка
  - Бурение
  - Добыча
  - Завершение

## Установка и запуск

```bash
# Установка зависимостей
npm install

# Запуск в режиме разработки
npm run dev

# Сборка для продакшена
npm run build

# Просмотр сборки
npm run preview
```

## Деплой на GitHub Pages

При пуше в ветку `main` приложение автоматически собирается и публикуется на **https://axaleiger.github.io/cda/**

**Чтобы сайт открывался по этому адресу:**
1. Репозиторий должен называться **`cda`** и находиться в аккаунте **axaleiger**.
2. В настройках репозитория: **Settings → Pages → Source** — выберите **GitHub Actions**.
3. Сделайте `git push` в `main` или запустите workflow **Deploy to GitHub Pages** вручную (Actions → Deploy to GitHub Pages → Run workflow).

## Технологии

- **React 18** - UI библиотека
- **Vite** - Сборщик и dev-сервер
- **react-simple-maps** - Интерактивные карты
- **recharts** - Графики и диаграммы
- **@react-three/fiber** - 3D визуализация
- **three.js** - 3D графика
- **zustand** - Управление состоянием

## Структура проекта

```
cda/
├── src/
│   ├── components/
│   │   ├── RussiaMap.jsx          # Карта России
│   │   ├── WindRose.jsx           # Розы ветров
│   │   ├── Hypercube3D.jsx        # 3D куб
│   │   ├── CashFlowChart.jsx      # Графики Cash Flow
│   │   └── LifecycleChart.jsx     # График жизненного цикла
│   ├── App.jsx                    # Главный компонент
│   ├── App.css
│   ├── main.jsx                   # Точка входа
│   └── index.css                  # Глобальные стили
├── index.html
├── package.json
├── vite.config.js
└── README.md
```

## Использование

1. Откройте приложение в браузере (по умолчанию http://localhost:3000)
2. Изучите карту России и кликните на регион для просмотра цифровых двойников
3. Изучите статусы объектов на розах ветров
4. Настройте параметры 3D куба и наблюдайте изменения
5. Проанализируйте Cash Flow и график добычи
6. Изучите этапы жизненного цикла актива

## Примечания

- Для корректной работы карты России требуется подключение к интернету (загрузка топологии)
- 3D куб можно вращать мышью (зажать левую кнопку и двигать)
- Все графики интерактивны и реагируют на изменения параметров в реальном времени
